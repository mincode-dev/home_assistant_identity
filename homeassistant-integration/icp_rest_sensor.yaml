# ICP Addon REST Sensor Configuration
# This sensor pulls real-time data from the ICP Identity Addon
# Place this in your Home Assistant configuration.yaml file under the 'rest:' section

rest:
  - resource: "http://icp-identity:8099/stats"
    scan_interval: 30
    timeout: 10
    sensor:
      - name: "ICP Addon Status (Internal)"
        icon: mdi:database
        entity_category: diagnostic
        json_attributes:
          - principal
          - public_key
          - network
          - has_mnemonic
          - identity_file
          - agent_url
          - backup_count
          - data_size_mb
        value_template: >
          {% if value_json.principal %}
            connected
          {% else %}
            disconnected
          {% endif %}